<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BuhaaTh</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="favicon.ico" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      color: #fff;
      position: relative;
      z-index: 1;
    }

    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .top-bar {
      display: flex;
      justify-content: flex-end;
      padding: 15px 30px;
      background: transparent;
    }

    .top-bar a {
      color: white;
      text-decoration: none;
      margin-left: 10px;
      font-weight: bold;
    }

    .container {
      max-width: 900px;
      margin: 15px auto;
      text-align: center;
    }

    .search-box {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      backdrop-filter: blur(5px);
      padding: 30px;
      box-shadow: 0 4px 15px rgba(124, 77, 255, 0.3);
    }

    input, select, button {
      margin: 5px 0;
      padding: 5px;
      border-radius: 5px;
      border: none;
      width: 100%;
    }

    button {
      background-color: #7C4DFF;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }

    .tools {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-top: 15px;
      text-align: left;
    }

    .tools a {
      background: rgba(255,255,255,0.15);
      padding: 6px;
      border-radius: 5px;
      color: white;
      text-decoration: none;
      font-size: 7px;
      display: block;
    }

    .result {
      background: white;
      color: black;
      padding: 8px;
      margin: 8px 0;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
      text-align: left;
    }

    .result h3 {
      margin-top: 0;
      color: #7C4DFF;
    }

   .filters {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin: 10px 0;
    }

    .remove-filters {
      background: transparent;
      border: 1px solid white;
    }
  </style>
</head>
<body>

<!-- ÿÆŸÑŸÅŸäÿ© Particles -->
<div id="particles-js"></div>

<!-- ÿ¥ÿ±Ÿäÿ∑ ÿπŸÑŸàŸä -->
<div class="top-bar">
  <a href="register.html">‚ûï Register</a>
  <a href="login.html">üîê Login</a>
  <a href="logout.html">üö™ Logout</a>
</div>

<!-- ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ -->
<div class="container">
  <img src="header-logo.png" style="max-width: 240px;" alt="Logo" />
  <p>What is your research field today?</p>

  <!-- ŸÖÿ±ÿ®ÿπ ÿßŸÑÿ®ÿ≠ÿ´ -->
  <div class="search-box">
    <input type="text" id="query" placeholder="Ask the research..." />

    <!-- ÿßŸÑŸÅŸÑÿßÿ™ÿ± -->
    <div class="filters">
      <select id="fieldFilter">
        <option value="">üìö Filter by Field (Optional)</option>
        <option value="biology">Biology</option>
        <option value="computer science">Computer Science</option>
        <option value="medicine">Medicine</option>
        <option value="engineering">Engineering</option>
        <option value="economics">Economics</option>
        <option value="psychology">Psychology</option>
        <option value="chemistry">Chemistry</option>
      </select>
      <input type="number" id="yearFilter" placeholder="üìÜ Filter by Year (Optional)" />
      <button onclick="clearFilters()" class="remove-filters">üßπ Clear Filters</button>
    </div>

    <button id="searchBtn" onclick="search()">üîç Search</button>

    <!-- ÿßŸÑÿ£ÿØŸàÿßÿ™ -->
    <div class="tools">
      <a href="summary.html">üìö Summarizer ‚Äì Summarize any academic text.</a>
      <a href="citation.html">üìù Citation Generator ‚Äì Generate references in APA or MLA.</a>
      <a href="plagiarism.html">üìÑ Plagiarism Check ‚Äì Detect potential plagiarism.</a>
      <a href="grammar.html">‚úçÔ∏è Grammar Checker ‚Äì Correct grammar and spelling.</a>
    </div>
  </div>

  <!-- ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ®ÿ≠ÿ´ -->
  <div id="results"></div>
</div>

<!-- ÿ≥ŸÉÿ±ÿ®ÿ™ ÿßŸÑÿ®ÿ≠ÿ´ -->
<script>
  async function search() {
    const query = document.getElementById("query").value.trim();
    const field = document.getElementById("fieldFilter").value.trim();
    const year = document.getElementById("yearFilter").value.trim();
    const searchBtn = document.getElementById("searchBtn");
    const results = document.getElementById("results");

    if (!query) return alert("Please enter a search term.");

    searchBtn.textContent = "Searching...";
    searchBtn.disabled = true;
    results.innerHTML = "";

    try {
      let fullQuery = query;
      if (field) fullQuery += ` ${field}`;
      if (year) fullQuery += ` ${year}`;

      const res = await fetch(`https://api.semanticscholar.org/graph/v1/paper/search?query=${encodeURIComponent(fullQuery)}&limit=50&fields=title,abstract,authors,year,url`);
      const data = await res.json();

      if (!data.data || data.data.length === 0) {
        results.innerHTML = "<p>No results found.</p>";
      } else {
        data.data.forEach(paper => {
          const div = document.createElement("div");
          div.className = "result";
          div.innerHTML = `
            <h3><a href="${paper.url}" target="_blank" style="color:#7C4DFF; text-decoration: none;">${paper.title}</a></h3>
            <p><strong>Authors:</strong> ${paper.authors.map(a => a.name).join(", ")}</p>
            <p><strong>Published:</strong> ${paper.year || "N/A"}</p>
            <p><strong>Abstract:</strong><br>${paper.abstract || "No abstract available."}</p>
          `;
          results.appendChild(div);
        });
      }
    } catch (err) {
      results.innerHTML = "<p>Error fetching results. Try again later.</p>";
    }

    searchBtn.textContent = "üîç Search";
    searchBtn.disabled = false;
  }

  function clearFilters() {
    document.getElementById("fieldFilter").value = "";
    document.getElementById("yearFilter").value = "";
  }
</script>

<!-- ŸÖŸÉÿ™ÿ®ÿ© ÿßŸÑÿÆŸÑŸÅŸäÿ© -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
  particlesJS("particles-js", {
    "particles": {
      "number": { "value": 60 },
      "color": { "value": "#7C4DFF" },
      "shape": { "type": "circle" },
      "opacity": { "value": 0.3 },
      "size": { "value": 4, "random": true },
      "line_linked": {
        "enable": true,
        "distance": 120,
        "color": "#7C4DFF",
        "opacity": 0.4,
        "width": 1
      },
      "move": { "enable": true, "speed": 2 }
    },
    "interactivity": {
      "events": { "onhover": { "enable": true, "mode": "repulse" } }
    },
    "retina_detect": true
  });
</script>

</body>
</html>
