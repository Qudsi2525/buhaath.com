<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>بحث Semantic Scholar</title>
  <style>
    body { font-family: sans-serif; padding: 1rem; max-width: 800px; margin: auto; }
    textarea { width: 100%; font-size: 1rem; padding: .5rem; }
    button { padding: .5rem 1rem; font-size: 1rem; margin-top: .5rem; }
    ul { list-style: none; padding: 0; }
    li { margin-bottom: 1rem; }
    a { text-decoration: none; color: #0366d6; }
    a:hover { text-decoration: underline; }
    small { color: #555; }
  </style>
</head>
<body>
  <h1>بحث في Semantic Scholar</h1>
  <p>اكتب عبارة البحث ثم اضغط “ابحث”:</p>
  <textarea id="query" rows="2" placeholder="مثال: machine learning"></textarea><br>
  <button onclick="search()">ابحث</button>
  <ul id="results"></ul>

  <script>
    async function search() {
      const q = encodeURIComponent(document.getElementById("query").value.trim());
      if (!q) return alert("يرجى إدخال عبارة البحث.");
      const url = `https://api.semanticscholar.org/graph/v1/paper/search?query=${q}&limit=5&fields=title,year,authors,url`;
      const resultsEl = document.getElementById("results");
      resultsEl.innerHTML = "<li>جارٍ البحث…</li>";
      try {
        const res = await fetch(url);
        const json = await res.json();
        if (!json.data || !json.data.length) {
          resultsEl.innerHTML = "<li>لا توجد نتائج.</li>";
          return;
        }
        resultsEl.innerHTML = json.data.map(p => {
          const authors = p.authors.map(a => a.name).join(", ");
          return `
            <li>
              <a href="${p.url}" target="_blank"><strong>${p.title}</strong></a><br>
              <small>${authors} — ${p.year}</small>
            </li>`;
        }).join("");
      } catch (e) {
        resultsEl.innerHTML = "<li>خطأ في الاتصال. حاول مرة أخرى.</li>";
      }
    }
  </script>
</body>
</html>
